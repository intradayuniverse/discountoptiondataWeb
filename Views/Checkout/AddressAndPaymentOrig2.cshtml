@model DiscountOptionDataWeb.Models.CustomerOrder
@{
    ViewBag.Title = "AddressAndPayment";
}


<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"
        type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"
        type="text/javascript"></script>

<div  class="container-fluid">
          @using (Html.BeginForm("AddressAndPayment", "Checkout", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form", id = "frmCharge" }))
          {
            <div class="row">
      
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 col-md-push-6 col-sm-push-6">
                    @*@Html.ValidationSummary("", new { @class = "text-danger" })*@
                    <!--SHIPPING METHOD-->
                    <div class="panel panel-info">
                     
                        <div class="panel-heading">Address</div>
                        <div class="panel-body">
                            
                           
                            <div class="form-group">
                                <div class="col-md-6 col-xs-12">
                                    <strong>First Name:</strong>
                                    @*<input type="text" name="first_name" class="form-control" value="" />*@
                                    @Html.TextBoxFor(model => model.FirstName, new { @class="form-control", id = "txtFirstName", @Value = "Luan" })
                                    @Html.ValidationMessageFor(model => model.FirstName,"", new { @class = "text-danger" })
                                </div>
                                <div class="span1"></div>
                                <div class="col-md-6 col-xs-12">
                                    <strong>Last Name:</strong>
                                    @Html.TextBoxFor(model => model.LastName, new { @class = "form-control", id = "txtLastName", @Value = "Huynh" })
                                    @Html.ValidationMessageFor(model => model.LastName,"", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-12"><strong>Address:</strong></div>
                                <div class="col-md-12">
                                    @Html.TextBoxFor(model => model.Address, new { @class = "form-control", id = "txtAddress", @Value = "123 Main" })
                                    @Html.ValidationMessageFor(model => model.Address, "", new { @class = "text-danger" })
                                 </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-12"><strong>City:</strong></div>
                                <div class="col-md-12">
                                    @Html.TextBoxFor(model => model.City, new { id = "txtCity", @Value = "Houston" })
                                    @Html.ValidationMessageFor(model => model.City, "", new { @class = "text-danger" })
                                  </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-12"><strong>State:</strong></div>
                                <div class="col-md-12">
                                    @Html.TextBoxFor(model => model.State, new { id = "txtState", @Value = "TX" })
                                    @Html.ValidationMessageFor(model => model.State, "", new { @class = "text-danger" })
                                 </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-12"><strong>Zip / Postal Code:</strong></div>
                                <div class="col-md-12">
                                    @Html.TextBoxFor(model => model.PostalCode, new { id = "txtPostalCode", @Value = "77082" })
                                    @Html.ValidationMessageFor(model => model.PostalCode,"", new { @class = "text-danger" })
                                 </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-12"><strong>Country:</strong></div>
                                <div class="col-md-12">
                                    @Html.TextBoxFor(model => model.Country, new { id = "txtCountry", @Value = "USA" })
                                    @Html.ValidationMessageFor(model => model.Country, "", new { @class = "text-danger" })
                                 </div>
                            </div>
                        </div>
                    </div>
                    <!--SHIPPING METHOD END-->
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 col-md-pull-6 col-sm-pull-6">
                    <!--CREDIT CART PAYMENT-->
                    <div class="panel panel-info">
                        <div class="panel-heading"><span><i class="glyphicon glyphicon-lock"></i></span> Secure Payment</div>
                        <div class="panel-body">
                            <div class="form-group">
                                <div class="col-md-12"><strong>Card Type:</strong></div>
                                <div class="col-md-12">
                                    <select id="CreditCardType" name="CreditCardType" class="form-control">
                                        <option value="5">Visa</option>
                                        <option value="6">MasterCard</option>
                                        <option value="7">American Express</option>
                                        <option value="8">Discover</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-12"><strong>Credit Card Number:</strong></div>
                                <div class="col-md-12"><input type="text" class="form-control" maxlength="16" required  name="CardNumber" id="txtCardNumber" value="" /></div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-12"><strong>Card CVV:</strong></div>
                                <div class="col-md-12"><input type="text"  name="Cvc" id="txtCvc" required  maxlength="3"  placeholder="CVC" /></div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-12">
                                    <strong>Expiration Month</strong>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" class="form-control" name="ExpiryMonth" id="txtExpiryMonth" value=""  maxlength="2" required placeholder="MM" />
                                  
                                </div>
                                <div class="col-md-12">
                                    <strong>Expiration Year</strong>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" class="form-control" name="ExpiryYear" id="txtExpiryYear" value="" required maxlength="4" placeholder="YYYY" />
                                   
                                </div>
                            </div>
                        </div>
                    </div>
                   
                </div>
            </div>

            <p>
                @Html.HiddenFor(model => model.Token, new { id = "hdnToken" })
                @*@Html.ActionLink("PLACE YOUR ORDER HERE", "Charge", null, new { id = "btnCharge", @class = "btn btn-primary active" })*@
                <button type="button" id="btnCharge" class="btn btn-primary center-block btn-lg">PLACE YOUR ORDER HERE</button>
             </p>


    <div class="container">
        <h2>DELIVERY METHODS</h2>
        <div class="panel-group">
            <div class="panel panel-default">
                <div class="panel-heading">Direct download from DiscountOptionData.com through browser</div>
                <div class="panel-body"><p>Upon completion of purchase, you can download your files directly from <a href="~/FileDelivery/Index">this page</a></p></div>
            </div>

            <div class="panel panel-primary">
                <div class="panel-heading">Share with your Google Drive</div>
                <div class="panel-body"><p>
    The easiest way to get your files is to have them shared with your Google Drive if you you have a Google Account.
    If you don't have a Google Account already, you can quickly <a href="https://accounts.google.com/SignUp" target="_blank">sign up here</a>
    <br />
                     Please provide us your Google Email address to have your files shared automatically

    @*@Html.TextBoxFor(model => model.GmailAddress, new { id = "txtGmailAddress", @Value = "luanhuynh73@gmail.com" })*@



    <div class="input-group">
    <span class="input-group-addon"><i class="glyphicon glyphicon-user">Gmail Address</i></span>
  
        @Html.TextBoxFor(model => model.GmailAddress, new { id = "txtGmailAddress", @Value = "luanhuynh73@gmail.com", @class="form-control", @placeholder="abc@gmail.com" })
    </div>

                       
</div>
            </div>

           

            <div class="panel panel-info">
                <div class="panel-heading">Ship Home</div>
                <div class="panel-body">
                <p>The old fashion way. We'll send you a flash drive with data to your home address</p>
                <p>Please check this box if you want this option: @Html.CheckBoxFor(model => model.ShipToHome, new { id = "chkShipToHome" })</p>
                <p>Please note that we'll need to charge you shipping and handling fee at 25 cents per GBs and flat surge charge fee of $19</p></div>
            </div>
        </div>
    </div>

    <p>
        @Html.HiddenFor(model => model.Token, new { id = "hdnToken" })
        @*@Html.ActionLink("PLACE YOUR ORDER HERE", "Charge", null, new { id = "btnCharge", @class= "btn btn-primary active" })*@
        <button type="button" id="btnCharge" class="btn btn-primary center-block btn-lg">PLACE YOUR ORDER HERE</button>
    </p>

          }
    </div>


@section Scripts {
    <script type="text/javascript" src="https://js.stripe.com/v2/"></script>
    <script type="text/javascript">
                $('document').ready(function () {
                    Stripe.setPublishableKey('pk_test_FV6Th1IbZs5mYovNyOrxOigs');

                    $('#btnCharge').on('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();

                        Stripe.card.createToken({
                            number: $('#txtCardNumber').val(),
                            cvc: $('#txtCvc').val(),
                            exp_month: $('#txtExpiryMonth').val(),
                            exp_year: $('#txtExpiryYear').val()
                        }, stripeResponseHandler);
                    });

                    function stripeResponseHandler(status, response) {
                        var $form = $('#frmCharge');

                        if (response.error) {
                            // Show the errors on the form
                            alert(response.error.message);
                        } else {
                            // response contains id and card, which contains additional card details
                            var token = response.id;
                            //alert(token);
                            // Insert the token into the form so it gets submitted to the server
                            $('#hdnToken').val(token);
                            // and submit
                            $form.get(0).submit();
                        }
                    }
                });
    </script>
}